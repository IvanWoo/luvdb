{% extends "base.html" %}
{% load url_filters %}

{% block content %}
<h2>Activity Feed</h2>

{% for activity in object_list %}
    <div>

        <!--Say-->
        {% if activity.activity_type == 'say' %}
            <a href="{% url 'accounts:detail' activity.user.username %}">
                {{ activity.user.display_name | default:activity.user.username }}
            </a> said:
            <div style="background-color:#f9f9f9; padding: 0.5em">
                {{ activity.content_object.content }}
            </div>
            <a href="{% url 'write:say_detail' activity.content_object.id %}">{{ activity.timestamp |date:"Y.m.d H:i" }}</a>
        
        <!--Post-->
        {% elif activity.activity_type == 'post' %}
            <a href="{% url 'accounts:detail' activity.user.username %}">
                {{ activity.user.display_name | default:activity.user.username }}
            </a> posted:
            <div style="background-color:#f9f9f9; padding: 0.5em">
                <a href="{% url 'write:post_detail' activity.content_object.id %}">{{activity.content_object.title}}</a>
            </div>
            {{ activity.timestamp |date:"Y.m.d H:i" }}

        <!--Pin-->
        {% elif activity.activity_type == 'pin' %}
            <a href="{% url 'accounts:detail' activity.user.username %}">
                {{ activity.user.display_name | default:activity.user.username }}
            </a> pinned:
            <div style="background-color:#f9f9f9; padding: 0.5em">
                <a href="{{ activity.content_object.url }}">{{activity.content_object.title}}</a> ({{activity.content_object.url|root_url}})
            </div>
            {{ activity.timestamp |date:"Y.m.d H:i" }}
            
        <!--Follow-->
        {% elif activity.activity_type == 'follow' %}
            <a href="{% url 'accounts:detail' activity.user.username %}">
                {{ activity.user.display_name | default:activity.user.username }}
            </a> followed 
            <a href="{% url 'accounts:detail' activity.content_object.followed.username %}">
                {{ activity.content_object.followed.display_name | default:activity.content_object.followed.username }}
            </a>
            {{ activity.timestamp |date:"Y.m.d H:i" }}
        {% endif %}
    </div>
    <br/>
{% endfor %}
{% endblock %}
