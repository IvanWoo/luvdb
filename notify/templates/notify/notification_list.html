{% extends "base.html" %}

{% block content %}
  <h1>Notifications</h1>

  <div style="display: flex; justify-content: space-between; width: 300px;">
    <form method="post" action="{% url 'notify:mark_all_as_read' %}">
      {% csrf_token %}
      <input type="submit" class='btn btn-sm btn-success' value="Mark all as read">
    </form>
    <form method="post" action="{% url 'notify:delete_all' %}">
      {% csrf_token %}
      <input type="submit" class='btn btn-sm btn-danger' value="Delete all Notifications">
    </form>
  </div>
  <hr>

  {% for notification in object_list %}
  <div class="notification">
    <span style='display: flex;'>
      <p>{{ notification.message | safe}}</p>
      <p>&nbsp;<small style='color:gray;'>{{ notification.timestamp | date:"Y.m.d H:i"}}</small>&nbsp;</p>
      <div style="display: flex; justify-content: space-between; width: 170px;">
        {% if not notification.read %}
          <form method="post" action="{% url 'notify:mark_as_read' notification.pk %}">
            {% csrf_token %}
            <input type="submit" class='btn btn-sm btn-outline-success' value="Mark as read">
          </form>
        {% endif %}
        <form method="post" action="{% url 'notify:delete' notification.pk %}">
          {% csrf_token %}
          <input type="submit" class='btn btn-sm btn-outline-danger' value="Delete">
        </form>
      </div>
    </span>
  </div>
  {% empty %}
    <p>You have no notifications.</p>
  {% endfor %}
{% endblock %}
