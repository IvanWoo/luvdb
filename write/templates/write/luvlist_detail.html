{% extends "base.html" %}
{% load static %}
{% load markdownify %}
{% load linkify %}
{% load crispy_forms_tags %}
{% load url_filters %}
{% block title %}{{ object.title }}{% endblock title%}
{% block content %}
    <div class="container">
        <div class="row">
            <div class='col-12 col-md-8'>
                <h2>{{ object.title }}</h2>
                <div class='d-flex justify-content-between align-items-start mb-2'>
                    <div class="d-flex align-items-start">
                        <div class="me-2">
                            by <a href="{% url 'accounts:detail' object.user.username %}">{{ object.user.display_name | default:object.user.username }}</a>
                        </div>

                        <div class='me-2 text-secondary d-none d-lg-block'>
                            Updated
                            <a href="{% url 'write:luvlist_list' object.user.username %}"
                                class="text-muted">{{ object.updated_at|timesince }} ago</a>
                        </div>
                    </div>    
                    <div>
                        <a href="{% url 'discover:vote' 'luvlist' object.id 'up' %}" 
                            class="me-1 btn btn-sm {% if has_voted %}btn-outline-danger active{% else %}btn-outline-danger{% endif %}" 
                            title="Like this list">
                            â™¡
                        </a>
                        <a href="{% url 'write:randomizer' object.id %}" class="btn btn-primary btn-sm">Surprise me!</a>
                    </div>
                </div>
                
                <div class="mb-2">{{ object.notes | linkify_tags | markdownify }}</div>
                <div class="mb-3 me-2 text-secondary d-lg-none">
                    Updated
                    <a href="{% url 'write:luvlist_list' object.user.username %}"
                        class="text-muted">{{ object.updated_at|timesince }} ago</a>
                </div>
                
                {% for content in contents %}
                    {% if content.content_object %}
                        {% if content.content_type.model == 'luvlist' %}
                            <div class="bg-light p-3 mb-3">
                                <span class="sticky-note">{{ content.order }}</span>
                                <div class="bg-white p-3">
                                    <a href="{% url 'write:luvlist_detail' content.content_object.id %}"
                                       class="text-decoration-none hover-username">
                                        <h5>{{ content.content_object.title }}</h5>
                                    </a>
                                </div>
                                {% if content.comment %}<div class="mt-3">{{ content.comment }}</div>{% endif %}
                                <div class="text-muted mt-3">Added on {{ content.timestamp|date:"Y.m.d H:i" }} | List</div>
                            </div>
                        {% elif content.content_type.model == 'say' %}
                            <div class="bg-light p-3 mb-3">
                                <span class="sticky-note">{{ content.order }}</span>
                                <div class="bg-white p-3">
                                    <div class="d-flex">
                                        <a href="{% url 'accounts:detail' content.content_object.user.username %}"
                                           class='me-1'>
                                            {{ content.content_object.user.display_name | default:content.content_object.user.username }}
                                        </a> said:
                                    </div>
                                    <div class="mt-2 p-3">
                                        <div>
                                            {{ content.content_object.content| linkify_tags:content.content_object.user | linkify_mentions | markdownify }}
                                        </div>
                                    </div>
                                    <span class="d-flex mt-2">
                                        <p class='me-2 text-secondary mb-2'>
                                            <a href="{% url "write:say_detail" content.content_object.id %}"
                                               class="text-muted">{{ object.timestamp|date:"Y.m.d H:i" }}</a>
                                        </p>
                                    </span>
                                </div>
                                {% if content.comment %}<div class="mt-3">{{ content.comment }}</div>{% endif %}
                                <div class="text-muted mt-3">Added on {{ content.timestamp|date:"Y.m.d H:i" }} | Say</div>
                            </div>
                        {% elif content.content_type.model == 'pin' %}
                            <div class="bg-light p-3 mb-3">
                                <span class="sticky-note">{{ content.order }}</span>
                                <div class="bg-white p-3">
                                    <div class="d-flex">
                                        <a href="{% url 'accounts:detail' content.content_object.user.username %}"
                                           class='me-1'>
                                            {{ content.content_object.user.display_name | default:content.content_object.user.username }}
                                        </a> pinned:
                                    </div>
                                    <div class="mt-2 p-3">
                                        <div>
                                            <a href="{{ content.content_object.url }}" class="text-decoration-none">{{ content.content_object.title }}</a>
                                            (<a href="{% url 'write:pins_from_url' content.content_object.url|root_url %}"
   class="text-decoration-none text-secondary">{{ content.content_object.url|root_url }}</a>)
                                        </div>
                                        {% if content.content_object.content %}
                                            <div>{{ content.content_object.content | linkify_tags | linkify_mentions | truncatechars:300 | markdownify }}</div>
                                        {% endif %}
                                    </div>
                                    <span class="d-flex mt-2">
                                        <p class='me-2 text-secondary mb-2'>
                                            <a href="{% url "write:pin_detail" content.content_object.id %}"
                                               class="text-muted">{{ object.timestamp|date:"Y.m.d H:i" }}</a>
                                        </p>
                                    </span>
                                </div>
                                {% if content.comment %}<div class="mt-3">{{ content.comment }}</div>{% endif %}
                                <div class="text-muted mt-3">Added on {{ content.timestamp|date:"Y.m.d H:i" }} | Pin</div>
                            </div>
                        {% elif content.content_type.model == 'post' %}
                            <!--Post-->
                            <div class="bg-light p-3 mb-3">
                                <span class="sticky-note">{{ content.order }}</span>
                                <div class="bg-white p-3">
                                    <div class="d-flex">
                                        <a href="{% url 'accounts:detail' content.content_object.user.username %}"
                                           class='me-1'>
                                            {{ content.content_object.user.display_name | default:content.content_object.user.username }}
                                        </a> posted:
                                    </div>
                                    <div class="mt-2 p-3">
                                        <div>
                                            <a href="{% url 'write:post_detail' content.content_object.id %}"
                                               class="text-decoration-none">{{ content.content_object.title }}</a>
                                        </div>
                                        <div>{{ content.content_object.content | linkify_tags | linkify_mentions | truncatechars:300 | markdownify }}</div>
                                    </div>
                                    <span class="d-flex mt-2">
                                        <p class='me-2 text-secondary mb-2'>
                                            <a href="{% url "write:post_detail" content.content_object.id %}"
                                               class="text-muted">{{ object.timestamp|date:"Y.m.d H:i" }}</a>
                                        </p>
                                    </span>
                                </div>
                                {% if content.comment %}<div class="mt-3">{{ content.comment }}</div>{% endif %}
                                <div class="text-muted mt-3">Added on {{ content.timestamp|date:"Y.m.d H:i" }} | Post</div>
                            </div>
                        {% elif content.content_type.model == 'repost' %}
                            <!--Post-->
                            <div class="bg-light p-3 mb-3">
                                <span class="sticky-note">{{ content.order }}</span>
                                <div class="bg-white p-3">
                                    <div class="d-flex">
                                        <a href="{% url 'accounts:detail' content.content_object.user.username %}"
                                           class='me-1'>
                                            {{ content.content_object.user.display_name | default:content.content_object.user.username }}
                                        </a> reposted:
                                    </div>
                                    <div class="mt-2 p-3">
                                        <div>
                                            <a href="{% url 'write:repost_detail' content.content_object.id %}"
                                               class="text-decoration-none">{{ content.content_object.title }}</a>
                                        </div>
                                        <div>{{ content.content_object.content | linkify_tags | linkify_mentions | truncatechars:300 | markdownify }}</div>
                                    </div>
                                    <span class="d-flex mt-2">
                                        <p class='me-2 text-secondary mb-2'>
                                            <a href="{% url "write:repost_detail" content.content_object.id %}"
                                               class="text-muted">{{ object.timestamp|date:"Y.m.d H:i" }}</a>
                                        </p>
                                    </span>
                                </div>
                                {% if content.comment %}<div class="mt-3">{{ content.comment }}</div>{% endif %}
                                <div class="text-muted mt-3">Added on {{ content.timestamp|date:"Y.m.d H:i" }} | Post</div>
                            </div>
                        {% elif content.content_type.model == 'book' or content.content_type.model == 'issue' %}
                            <!--Book-->
                            <div class="bg-light p-3 mb-3">
                                <span class="sticky-note">{{ content.order }}</span>
                                <div class="bg-white p-3 d-flex">
                                    <div class="mb-3 mb-md-0 flex-shrink-0 checkin-cover">
                                        {% if user.pure_text_mode %}
                                            <div class="cover-placeholder bg-light">{{ content.content_object.title }}</div>
                                        {% else %}
                                            {% if content.content_object.cover %}
                                                {% if content.content_object.cover_sens %}
                                                    <img src="{{ content.content_object.cover.url }}"
                                                        alt="{{ content.content_object.title }} cover"
                                                        style="width: 100%"
                                                        class="img-fluid blur cover-border"
                                                        onclick="this.classList.toggle('blur')">
                                                {% else %}
                                                    <img src="{{ content.content_object.cover.url }}"
                                                        alt="{{ content.content_object.title }} cover"
                                                        class="img-fluid cover-border"
                                                        onerror="this.onerror=null; this.parentNode.innerHTML='<div class=\'cover-placeholder\'>{{ content.content_object.title }}</div>';">
                                                        {% endif %}
                                            {% else %}
                                                <div class="cover-placeholder">{{ content.content_object.title }}</div>
                                            {% endif %}
                                        {% endif %}
                                    </div>
                                    <div class="flex-grow-1 ms-3">
                                        {% if content.content_type.model == 'book' %}
                                            <a href=" {% url 'read:book_detail' content.content_object.id %} "
                                               class="text-decoration-none hover-username">
                                                <h5>{{ content.content_object.title }}</h5>
                                            </a>
                                        {% elif content.content_type.model == 'issue' %}
                                            <h5>{{ content.content_object.periodical.title }}</h5>
                                            <a href=" {% url 'read:issue_detail' content.content_object.periodical.id content.content_object.id %} "
                                               class="text-decoration-none hover-username">
                                                <h6>{{ content.content_object.title }}</h6>
                                            </a>
                                        {% endif %}
                                        {% if content.content_type.model == 'book' %}
                                            {% regroup content.content_object.bookrole_set.all by role as roles_list %}
                                            {% for role in roles_list %}
                                                <div>
                                                    {# djlint:off #}
                                                    {{ role.grouper.name }}{% if role.list|length > 1 %}s{% endif %}:
                                                    {# djlint:on #}
                                                    {% for book_role in role.list %}
                                                        {% if not forloop.first %}/{% endif %}
                                                        <a href="{% url 'entity:creator_detail' book_role.creator.id %}">
                                                            {{ book_role.alt_name | default:book_role.creator.name }}
                                                        </a>
                                                    {% endfor %}
                                                </div>
                                            {% endfor %}
                                        {% endif %}
                                        <div>
                                            {% if content.content_object.publication_date %}Date: {{ content.content_object.publication_date }}{% endif %}
                                        </div>
                                    </div>
                                </div>
                                {% if content.comment %}<div class="mt-3">{{ content.comment }}</div>{% endif %}
                                <div class="text-muted mt-3">Added on {{ content.timestamp|date:"Y.m.d H:i" }} | Book</div>
                            </div>
                        {% elif content.content_type.model == 'movie' or content.content_type.model == 'series' %}
                            <!--Movie/Series-->
                            <div class="bg-light p-3 mb-3">
                                <span class="sticky-note">{{ content.order }}</span>
                                <div class="bg-white p-3 d-flex">
                                    <div class="mb-3 mb-md-0 flex-shrink-0 checkin-cover">
                                        {% if user.pure_text_mode %}
                                            <div class="cover-placeholder bg-light">{{ content.content_object.title }}</div>
                                        {% else %}
                                            {% if content.content_object.poster %}
                                                {% if content.content_object.poster_sens %}
                                                    <img src="{{ content.content_object.poster.url }}"
                                                        alt="{{ content.content_object.title }} cover"
                                                        style="width: 100%"
                                                        class="img-fluid blur cover-border"
                                                        onclick="this.classList.toggle('blur')">
                                                {% else %}
                                                    <img src="{{ content.content_object.poster.url }}"
                                                        alt="{{ content.content_object.title }} cover"
                                                        class="img-fluid cover-border"
                                                        onerror="this.onerror=null; this.parentNode.innerHTML='<div class=\'cover-placeholder\'>{{ content.content_object.title }}</div>';">
                                                        {% endif %}
                                            {% else %}
                                                <div class="cover-placeholder">{{ content.content_object.title }}</div>
                                            {% endif %}
                                        {% endif %}
                                    </div>
                                    <div class="flex-grow-1 ms-3">
                                        {% if content.content_type.model == 'movie' %}
                                            <a href=" {% url 'watch:movie_detail' content.content_object.id %} "
                                               class="text-decoration-none hover-username">
                                                <h5>{{ content.content_object.title }}</h5>
                                            </a>
                                        {% elif content.content_type.model == 'series' %}
                                            <a href=" {% url 'watch:series_detail' content.content_object.id %} "
                                               class="text-decoration-none hover-username">
                                                <h5>{{ content.content_object.title }}</h5>
                                            </a>
                                        {% endif %}
                                        {% if content.content_type.model == 'movie' %}
                                            {% regroup content.content_object.movieroles.all by role as roles_list %}
                                            {% for role in roles_list %}
                                                <div>
                                                    {# djlint:off #}
                                                    {{ role.grouper.name }}{% if role.list|length > 1 %}s{% endif %}:
                                                    {# djlint:on #}
                                                    {% for movie_role in role.list %}
                                                        {% if not forloop.first %}/{% endif %}
                                                        <a href="{% url 'entity:creator_detail' movie_role.creator.id %}">
                                                            {{ movie_role.alt_name | default:movie_role.creator.name }}
                                                        </a>
                                                    {% endfor %}
                                                </div>
                                            {% endfor %}
                                        {% else %}
                                            {% regroup content.content_object.seriesroles.all by role as roles_list %}
                                            {% for role in roles_list %}
                                                <div>
                                                    {# djlint:off #}
                                                    {{ role.grouper.name }}{% if role.list|length > 1 %}s{% endif %}:
                                                    {# djlint:on #}
                                                    {% for series_role in role.list %}
                                                        {% if not forloop.first %}/{% endif %}
                                                        <a href="{% url 'entity:creator_detail' series_role.creator.id %}">
                                                            {{ series_role.alt_name | default:series_role.creator.name }}
                                                        </a>
                                                    {% endfor %}
                                                </div>
                                            {% endfor %}
                                        {% endif %}
                                        {% if content.content_object.release_date %}
                                        <div>
                                            Date: {{ content.content_object.release_date }}
                                        </div>
                                        {% endif %}
                                        {% if content.content_object.region_release_dates.all %}
                                            {% with earliest_region_release_date=content.content_object.region_release_dates.all|first %}
                                                Date: {{earliest_region_release_date.release_date}} ({{earliest_region_release_date.region}})
                                            {% endwith %}
                                        {% endif %}
                                    </div>
                                </div>
                                {% if content.comment %}<div class="mt-3">{{ content.comment }}</div>{% endif %}
                                <div class="text-muted mt-3">
                                    Added on {{ content.timestamp|date:"Y.m.d H:i" }} |
                                    {% if content.content_type.model == 'movie' %}
                                        Movie
                                    {% elif content.content_type.model == 'series' %}
                                        Series
                                    {% endif %}
                                </div>
                            </div>
                        {% elif content.content_type.model == 'release' %}
                            <!--Music-->
                            <div class="bg-light p-3 mb-3">
                                <span class="sticky-note">{{ content.order }}</span>
                                <div class="bg-white p-3 d-flex">
                                    <div class="mb-3 mb-md-0 flex-shrink-0 checkin-cover">
                                        {% if user.pure_text_mode %}
                                            <div class="listen-cover-placeholder bg-light">{{ content.content_object.title }}</div>
                                        {% else %}
                                            {% if content.content_object.cover %}
                                                {% if content.content_object.cover_sens %}
                                                    <img src="{{ content.content_object.cover.url }}"
                                                        alt="{{ content.content_object.title }} cover"
                                                        style="width: 100%"
                                                        class="img-fluid blur cover-border"
                                                        onclick="this.classList.toggle('blur')">
                                                {% else %}
                                                    <img src="{{ content.content_object.cover.url }}"
                                                        alt="{{ content.content_object.title }} cover"
                                                        class="img-fluid cover-border"
                                                        onerror="this.onerror=null; this.parentNode.innerHTML='<div class=\'cover-placeholder\'>{{ content.content_object.title }}</div>';">
                                                {% endif %}
                                            {% else %}
                                                <div class="listen-cover-placeholder">{{ content.content_object.title }}</div>
                                            {% endif %}
                                        {% endif %}
                                    </div>
                                    <div class="flex-grow-1 ms-3">
                                        <a href="{% url 'listen:release_detail' content.content_object.id %}"
                                           class="text-decoration-none hover-username">
                                            <h5>{{ content.content_object.title }}</h5>
                                        </a>
                                        {% regroup content.content_object.releaserole_set.all by role as roles_list %}
                                        {% for role in roles_list %}
                                            <div>
                                                {# djlint:off #}
                                                {{ role.grouper.name }}{% if role.list|length > 1 %}s{% endif %}:
                                                {# djlint:on #}
                                                {% for release_role in role.list %}
                                                    {% if not forloop.first %}/{% endif %}
                                                    <a href="{% url 'entity:creator_detail' release_role.creator.id %}">
                                                        {{ release_role.alt_name | default:release_role.creator.name }}
                                                    </a>
                                                {% endfor %}
                                            </div>
                                        {% endfor %}
                                        <div>
                                            {% if content.content_object.labels %}
                                                {# djlint:off #}
                                                Label{% if content.content_object.labels.list|length > 1 %}s{% endif %}:
                                                {# djlint:on #}
                                                {% for label in content.content_object.labels.all %}
                                                    {% if not forloop.first %},{% endif %}
                                                    <a href="{% url 'entity:company_detail' label.id %}">{{ label.name }}</a>
                                                {% endfor %}
                                            {% endif %}
                                        </div>
                                        {% if content.content_object.release_date %}
                                        <div>
                                            Release Date: {{ content.content_object.release_date }}
                                        </div>
                                        {% endif %}
                                        {% if content.content_object.catalog_number %}
                                            Catalog Number: {{ content.content_object.catalog_number }}
                                        {% endif %}
                                        <div class="d-flex align-items-center mt-1">
                                            {% if content.content_object.spotify_url %}
                                                <a href="{{content.content_object.spotify_url}}" aria-label="Open in Spotify" class="me-2">
                                                    <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="32" height="32" viewBox="0 0 50 50" style="fill: var(--text-default);">
                                                        <path d="M25.009,1.982C12.322,1.982,2,12.304,2,24.991S12.322,48,25.009,48s23.009-10.321,23.009-23.009S37.696,1.982,25.009,1.982z M34.748,35.333c-0.289,0.434-0.765,0.668-1.25,0.668c-0.286,0-0.575-0.081-0.831-0.252C30.194,34.1,26,33,22.5,33.001 c-3.714,0.002-6.498,0.914-6.526,0.923c-0.784,0.266-1.635-0.162-1.897-0.948s0.163-1.636,0.949-1.897 c0.132-0.044,3.279-1.075,7.474-1.077C26,30,30.868,30.944,34.332,33.253C35.022,33.713,35.208,34.644,34.748,35.333z M37.74,29.193 c-0.325,0.522-0.886,0.809-1.459,0.809c-0.31,0-0.624-0.083-0.906-0.26c-4.484-2.794-9.092-3.385-13.062-3.35 c-4.482,0.04-8.066,0.895-8.127,0.913c-0.907,0.258-1.861-0.272-2.12-1.183c-0.259-0.913,0.272-1.862,1.184-2.12 c0.277-0.079,3.854-0.959,8.751-1c4.465-0.037,10.029,0.61,15.191,3.826C37.995,27.328,38.242,28.388,37.74,29.193z M40.725,22.013 C40.352,22.647,39.684,23,38.998,23c-0.344,0-0.692-0.089-1.011-0.275c-5.226-3.068-11.58-3.719-15.99-3.725 c-0.021,0-0.042,0-0.063,0c-5.333,0-9.44,0.938-9.481,0.948c-1.078,0.247-2.151-0.419-2.401-1.495 c-0.25-1.075,0.417-2.149,1.492-2.4C11.729,16.01,16.117,15,21.934,15c0.023,0,0.046,0,0.069,0 c4.905,0.007,12.011,0.753,18.01,4.275C40.965,19.835,41.284,21.061,40.725,22.013z"></path>
                                                    </svg>      
                                                </a>    
                                            {% endif %}
                                            {% if content.content_object.apple_music_url %}
                                                <a href="{{content.content_object.apple_music_url}}" aria-label="Open in Apple Music" class="me-2">
                                                    <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="32" height="32" viewBox="0 0 50 50" style="fill: var(--text-default);">
                                                        <path d="M37,4H13c-4.962,0-9,4.037-9,9v24c0,4.963,4.038,9,9,9h24c4.962,0,9-4.037,9-9V13C46,8.037,41.962,4,37,4z M35,27v4v0.021	h-0.002C34.986,33.768,32.749,36,30,36h-0.5c-0.987,0-1.933-0.42-2.596-1.152c-0.662-0.731-0.985-1.718-0.887-2.705	C26.195,30.38,27.787,29,29.643,29H31c1.103,0,2-0.897,2-2v-9.795l-12,2.25V30v4c0,2.757-2.243,5-5,5h-0.5	c-0.987,0-1.933-0.42-2.596-1.152c-0.662-0.731-0.985-1.718-0.887-2.705C12.195,33.38,13.787,32,15.643,32H17c1.103,0,2-0.897,2-2	V15.353c0-0.963,0.687-1.79,1.633-1.966l12.591-2.36c0.439-0.083,0.891,0.033,1.234,0.319C34.803,11.632,35,12.053,35,12.5V27z"></path>
                                                    </svg>
                                                </a>
                                            {% endif %}
                                            {% if content.content_object.wikipedia %}
                                                <a href="{{content.content_object.wikipedia}}" aria-label="Open in Wikipedia" class="me-2">
                                                    <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="31" height="31" viewBox="0 0 50 50" style="fill: var(--text-default);">
                                                        <path d="M 9 4 C 6.2504839 4 4 6.2504839 4 9 L 4 41 C 4 43.749516 6.2504839 46 9 46 L 41 46 C 43.749516 46 46 43.749516 46 41 L 46 9 C 46 6.2504839 43.749516 4 41 4 L 9 4 z M 9 6 L 41 6 C 42.668484 6 44 7.3315161 44 9 L 44 41 C 44 42.668484 42.668484 44 41 44 L 9 44 C 7.3315161 44 6 42.668484 6 41 L 6 9 C 6 7.3315161 7.3315161 6 9 6 z M 18.375 15.998047 C 18.196 15.998047 18.017578 16.173656 18.017578 16.347656 L 18.017578 17.650391 C 18.017578 17.825391 18.196 18 18.375 18 L 19.810547 18 L 24.105469 26.019531 L 20.705078 32.119141 L 14.263672 18 L 15.642578 18 C 15.821578 18 16 17.826344 16 17.652344 L 16 16.349609 C 16 16.174609 15.821578 16 15.642578 16 L 8.3574219 16 C 8.1784219 16 8 16.173656 8 16.347656 L 8 17.650391 C 8 17.825391 8.1784219 18 8.3574219 18 L 10.505859 18 L 19.810547 36.826172 C 19.900547 36.913172 19.988969 37 20.167969 37 C 20.346969 37 20.437344 36.913172 20.527344 36.826172 L 25.269531 28.287109 L 29.652344 36.826172 C 29.742344 36.913172 29.832719 37 30.011719 37 C 30.189719 37 30.278187 36.913172 30.367188 36.826172 L 39.583984 17.912109 L 41.642578 17.912109 C 41.821578 17.912109 42 17.738453 42 17.564453 L 42 16.349609 C 42 16.174609 41.821578 16 41.642578 16 L 35.357422 16 C 35.178422 16 35 16.173656 35 16.347656 L 35 17.650391 C 35 17.825391 35.179422 18 35.357422 18 L 37.167969 18 L 30.457031 32.119141 L 26.96875 25.148438 L 31.263672 18 L 32.642578 18 C 32.821578 18 33 17.826344 33 17.652344 L 33 16.349609 C 33 16.174609 32.821578 16 32.642578 16 L 27.357422 16 C 27.178422 16 27 16.173656 27 16.347656 L 27 17.650391 C 27 17.825391 27.178422 18 27.357422 18 L 28.757812 18 L 25.804688 22.884766 L 23.388672 18 L 24.642578 18 C 24.821578 18 25 17.826344 25 17.652344 L 25 16.349609 C 25 16.174609 24.821578 15.999047 24.642578 15.998047 L 18.375 15.998047 z"></path>
                                                    </svg>
                                                </a>
                                            {% endif %}

                                            {% if content.content_object.discogs %}
                                            <a href="{{content.content_object.discogs}}" aria-label="Open in Discogs" class="me-2">
                                                <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="32" height="32" viewBox="0 0 50 50" style="fill: var(--text-default);">
                                                    <path d="M 25 2 C 12.318 2 2 12.318 2 25 C 2 31.39 4.62175 37.177609 8.84375 41.349609 L 10.912109 39.179688 C 7.2641094 35.554688 5 30.537 5 25 C 5 13.972 13.972 5 25 5 C 28.326 5 31.457703 5.8284844 34.220703 7.2714844 L 35.626953 4.6113281 C 32.445953 2.9463281 28.832 2 25 2 z M 25 7 C 15.075 7 7 15.075 7 25 C 7 29.968 9.0230625 34.472422 12.289062 37.732422 L 14.359375 35.558594 C 11.667375 32.846594 10 29.115 10 25 C 10 16.729 16.729 10 25 10 C 27.483 10 29.822719 10.616453 31.886719 11.689453 L 33.287109 9.0371094 C 30.804109 7.7421094 27.989 7 25 7 z M 40.986328 8.4863281 L 38.912109 10.662109 C 42.660109 14.298109 45 19.378 45 25 C 45 36.028 36.028 45 25 45 C 21.595 45 18.388125 44.139813 15.578125 42.632812 L 14.230469 45.314453 C 17.445469 47.026453 21.11 48 25 48 C 37.682 48 48 37.683 48 25 C 48 18.525 45.306328 12.670328 40.986328 8.4863281 z M 25 12 C 17.832 12 12 17.832 12 25 C 12 28.546 13.430234 31.762375 15.740234 34.109375 L 19.884766 29.763672 C 18.718766 28.512672 18 26.84 18 25 C 18 21.14 21.14 18 25 18 C 26.134 18 27.203344 18.276813 28.152344 18.757812 L 30.953125 13.455078 C 29.167125 12.530078 27.146 12 25 12 z M 37.533203 12.107422 L 35.464844 14.275391 C 38.257844 17.001391 40 20.799 40 25 C 40 33.271 33.271 40 25 40 C 22.403 40 19.958172 39.335922 17.826172 38.169922 L 16.478516 40.849609 C 19.016516 42.219609 21.918 43 25 43 C 34.925 43 43 34.925 43 25 C 43 19.946 40.899203 15.379422 37.533203 12.107422 z M 34.087891 15.720703 L 29.951172 20.056641 C 31.216172 21.323641 32 23.072 32 25 C 32 28.859 28.86 32 25 32 C 23.694 32 22.474734 31.634766 21.427734 31.009766 L 18.726562 36.378906 C 20.588563 37.408906 22.726 38 25 38 C 32.168 38 38 32.168 38 25 C 38 21.367 36.498891 18.081703 34.087891 15.720703 z M 25 24 A 1 1 0 0 0 25 26 A 1 1 0 0 0 25 24 z"></path>
                                                </svg>
                                            </a>
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                                {% if content.comment %}<div class="mt-3">{{ content.comment }}</div>{% endif %}
                                <div class="text-muted mt-3">Added on {{ content.timestamp|date:"Y.m.d H:i" }} | Music</div>
                            </div>
                        {% elif content.content_type.model == 'game' %}
                            <!--Game-->
                            <div class="bg-light p-3 mb-3">
                                <span class="sticky-note">{{ content.order }}</span>
                                <div class="bg-white p-3 d-flex">
                                    <div class="mb-3 mb-md-0 flex-shrink-0 checkin-cover">
                                        {% if user.pure_text_mode %}
                                            <div class="cover-placeholder bg-light">{{ content.content_object.title }}</div>
                                        {% else %}
                                            {% if content.content_object.cover %}
                                                {% if content.content_object.cover_sens %}
                                                    <img src="{{ content.content_object.cover.url }}"
                                                        alt="{{ content.content_object.title }} cover"
                                                        style="width: 100%"
                                                        class="img-fluid blur cover-border"
                                                        onclick="this.classList.toggle('blur')">
                                                {% else %}
                                                    <img src="{{ content.content_object.cover.url }}"
                                                        alt="{{ content.content_object.title }} cover"
                                                        class="img-fluid cover-border"
                                                        onerror="this.onerror=null; this.parentNode.innerHTML='<div class=\'cover-placeholder\'>{{ content.content_object.title }}</div>';">
                                                {% endif %}
                                            {% else %}
                                                <div class="cover-placeholder">{{ content.content_object.title }}</div>
                                            {% endif %}
                                        {% endif %}
                                    </div>
                                    <div class="flex-grow-1 ms-3">
                                        <a href="{% url 'play:game_detail' content.content_object.id %}"
                                           class="text-decoration-none hover-username">
                                            <h5>{{ content.content_object.title }}</h5>
                                        </a>
                                        {% regroup content.content_object.gamerole_set.all by role as roles_list %}
                                        {% for role in roles_list %}
                                            <div>
                                                {# djlint:off #}
                                                {{ role.grouper.name }}{% if role.list|length > 1 %}s{% endif %}:
                                                {# djlint:on #}
                                                {% for game_role in role.list %}
                                                    {% if not forloop.first %}/{% endif %}
                                                    <a href="{% url 'entity:creator_detail' game_role.creator.id %}">
                                                        {{ game_role.alt_name | default:game_role.creator.name }}
                                                    </a>
                                                {% endfor %}
                                            </div>
                                        {% endfor %}
                                        <div>
                                            {% if content.content_object.developers %}
                                                {# djlint:off #}
                                                Developer{% if content.content_object.developers.list|length > 1 %}s{% endif %}:
                                                {# djlint:on #}
                                                {% for developer in content.content_object.developers.all %}
                                                    {% if not forloop.first %},{% endif %}
                                                    <a href="{% url 'entity:company_detail' developer.id %}">{{ developer.name }}</a>
                                                {% endfor %}
                                            {% endif %}
                                        </div>
                                        <div>
                                            {% if content.content_object.platforms %}
                                                {# djlint:off #}
                                                Platform{% if content.content_object.platforms.list|length > 1 %}s{% endif %}:
                                                {# djlint:on #}
                                                {% for platform in content.content_object.platforms.all %}
                                                    {% if not forloop.first %},{% endif %}
                                                    <a href="{% url 'play:platform_detail' platform.id %}">{{ platform.name }}</a>
                                                {% endfor %}
                                            {% endif %}
                                        </div>
                                        <div>
                                            {% if content.content_object.release_date %}Release Date: {{ content.content_object.release_date }}{% endif %}
                                        </div>
                                    </div>
                                </div>
                                {% if content.comment %}<div class="mt-3">{{ content.comment }}</div>{% endif %}
                                <div class="text-muted mt-3">Added on {{ content.timestamp|date:"Y.m.d H:i" }} | Game</div>
                            </div>
                        {% else %}
                            <div>
                                <span class="sticky-note">{{ content.order }}</span>
                                <div class="bg-white p-3">
                                    <p class="text-muted">This content type is not supported in List yet.</p>
                                </div>
                            </div>
                        {% endif %}
                    {% else %}
                        <div class="bg-light p-3 mb-3">
                            <span class="sticky-note">{{ content.order }}</span>
                            <div class="bg-white p-3">
                                <p class="text-muted">This content has been removed.</p>
                            </div>
                        </div>
                    {% endif %}
                    <hr>
                {% endfor %}
            </div>
            <div class="d-flex flex-column col-sm-4">
                {% if request.user == object.user %}
                    <div class="bg-light p-3 mb-3 order-2 order-sm-1">
                        <a class="text-muted" href="{% url 'write:luvlist_update' object.id %}">Edit List</a>
                    </div>
                {% endif %}
                {% if object.wikipedia or object.source %}
                    <div class="bg-light p-3 mb-3 order-1 order-sm-2">
                        <h5>Links</h5>
                        {% if object.source %}
                        <div>
                            <a href="{{ object.source }}">Source</a>
                        </div>
                        {% endif %}
                        {% if object.wikipedia %}
                        <div>
                            <a href="{{ object.wikipedia }}">Wikipedia</a>
                        </div>
                        {% endif %}
                        
                    </div>
                {% endif %}
                <div class="bg-light p-3 mb-3 order-1 order-sm-2">
                    <h5>Statistics</h5>
                    {% if book_count > 0 %}
                    <div>
                        Books: {{ book_count }} 
                    </div>
                    {% endif %}
                    {% if movie_count > 0 %}
                    <div>
                        Movies: {{ movie_count }} 
                    </div>
                    {% endif %}
                    {% if series_count > 0 %}
                    <div>
                        Series: {{ series_count }} 
                    </div>
                    {% endif %}

                    {% if release_count > 0 %}
                    <div>
                        Releases: {{ release_count }} 
                    </div>
                    {% endif %}
                    {% if audiobook_count > 0 %}
                    <div>
                        Audiobooks: {{ audiobook_count }} 
                    </div>
                    {% endif %}
                    {% if podcast_count > 0 %}
                    <div>
                        Podcasts: {{ podcast_count }} 
                    </div>
                    {% endif %}
                    {% if game_count > 0 %}
                    <div>
                        Games: {{ game_count }} 
                    </div>
                    {% endif %}
                </div>
            </div>

        </div>
    </div>
    <style>
    .sticky-note {
        position: relative;
        top: -1em;
        display: inline-block;
        padding: 0 10px;
        background: #e3e3e3;
        color: #a1a1a1;
        line-height: 18px;
        border-radius: 0 0 4px 4px;
      }
    </style>
{% endblock %}
