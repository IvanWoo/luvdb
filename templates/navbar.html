<nav class="navbar navbar-expand-lg bg-light p-2" style="padding-top: env(safe-area-inset-top, 0)">
    <div>
        <a class="navbar-brand ms-2"
           href="{% url 'activity_feed:activity_feed' %}">LÊŒvDB</a>
    </div>
    <button class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent"
            aria-expanded="false"
            aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse text-center" id="navbarSupportedContent">
        <ul class="navbar-nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0 mr-auto align-items-center text-sm-center">
            <li class="nav-item">
                <a class="nav-link btn btn-sm"
                   href="{% url 'read:read_list' %}">Read</a>
            </li>
            <li class="nav-item">
                <a class="nav-link btn btn-sm"
                   href="{% url 'watch:watch_list' %}">Watch</a>
            </li>
            <li class="nav-item">
                <a class="nav-link btn btn-sm"
                   href="{% url 'listen:listen_list' %}">Listen</a>
            </li>
            <li class="nav-item">
                <a class="nav-link btn btn-sm"
                   href="{% url 'play:play_list' %}">Play</a>
            </li>
            <li class="nav-item">
                <a class="nav-link btn btn-sm"
                   href="{% url 'discover:all' %}">Discover</a>
            </li>          
        </ul>
        <form class="me-2" method="GET" action="{% url 'search' %}">
            <div class="input-group">
                <label for="model" class="visually-hidden">Select Model</label>
                <select name="model"
                        id="model"
                        class="form-select form-select-sm"
                        style="max-width: 75px;
                            font-size: 0.75em">
                    <option value="all" {% if request.GET.model == "all" %}selected{% endif %}>All</option>
                    <option value="read" {% if request.GET.model == "read" %}selected{% endif %}>Read</option>
                    <option value="watch" {% if request.GET.model == "watch" %}selected{% endif %}>Watch</option>
                    <option value="listen" {% if request.GET.model == "listen" %}selected{% endif %}>Listen</option>
                    <option value="play" {% if request.GET.model == "play" %}selected{% endif %}>Play</option>
                    <option value="write" {% if request.GET.model == "write" %}selected{% endif %}>Write</option>
                    <option value="creator" {% if request.GET.model == "creator" %}selected{% endif %}>Creator</option>
                    <option value="user" {% if request.GET.model == "user" %}selected{% endif %}>User</option>
                </select>
                <input class="form-control"
                    type="search"
                    placeholder="Search"
                    aria-label="Search"
                    name="q"
                    value="{{ request.GET.q }}">
                <button class="btn btn-outline-secondary" type="submit" aria-label="Search">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                        <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                    </svg>
                </button>
            </div>
        </form>  
        <button id="darkModeToggle" class="btn btn-sm ms-2" style="display: none;" aria-label="Dark Mode Toggle">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-circle-half" viewBox="0 0 16 16"  style="vertical-align: middle;">
                <path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"/>
            </svg>
        </button>

        {% if user.is_authenticated %}
            <div>
                <a href="{% url 'notify:notification_list' %}"
                   class="btn btn-sm ms-2 me-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bell" viewBox="0 0 16 16" style="vertical-align: middle;">
                        <path d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2zM8 1.918l-.797.161A4.002 4.002 0 0 0 4 6c0 .628-.134 2.197-.459 3.742-.16.767-.376 1.566-.663 2.258h10.244c-.287-.692-.502-1.49-.663-2.258C12.134 8.197 12 6.628 12 6a4.002 4.002 0 0 0-3.203-3.92L8 1.917zM14.22 12c.223.447.481.801.78 1H1c.299-.199.557-.553.78-1C2.68 10.2 3 6.88 3 6c0-2.42 1.72-4.44 4.005-4.901a1 1 0 1 1 1.99 0A5.002 5.002 0 0 1 13 6c0 .88.32 4.2 1.22 6z"/>
                    </svg>
                    {% if new_notifications %}
                        ({{ new_notifications }})
                    {% endif %}
                </a>
            </div>
            <div class="dropdown text-end text-center">
                <a href="#"
                   class="d-block text-decoration-none dropdown-toggle btn btn-sm"
                   id="dropdownUser1"
                   data-bs-toggle="dropdown"
                   aria-expanded="false">
                   {{ user.display_name | default:user.username }}
                </a>
                <ul class="dropdown-menu text-small dropdown-menu-end"
                    aria-labelledby="dropdownUser1">
                    <li>
                        <a class="dropdown-item"
                           href="{% url 'accounts:detail' user.username %}">Profile</a>
                    </li>
                    <li>
                        <a class="dropdown-item" href="{% url 'password_change' %}">Change password</a>
                    </li>
                    <li>
                        <a class="dropdown-item" href="{% url 'logout' %}">Log Out</a>
                    </li>
                </ul>
            </div>
        {% else %}
            <div class="justify-content-center m-2">
                <a href="{% url 'login' %}" class="btn btn-primary me-2">Log
                In</a>
                <a href="{% url 'accounts:signup' %}" class="btn btn-secondary">Sign Up</a>
            </div>
        {% endif %}
    </div>
</nav>
